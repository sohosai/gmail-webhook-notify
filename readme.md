## デプロイ方法

1. リポジトリをクローンし、`npm install`で依存関係をインストールする
2. `npm run -w gas tsc` を実行し、gas/dist/main.jsの内容をGASにコピペする
3. GASのエディタの左のバーににある、「プロジェクトの設定」→「全般設定」の「タイムゾーン」が日本時間になっていることを確認する。
4. 下の方にスクロールし、「スクリプト プロパティ」の項目で、以下のように設定する

| プロパティ   |             値             |
|-------------|----------------------------|
| WEBHOOK_URL | 通知を送信するWebhookのURL  |
|    MODE     |   `Slack`もしくは`Discord`  |


5. GASのトリガーを設定。GASエディタの、「トリガー」→右下にある「トリガーを追加」を押して、出てきたウィンドウで以下のように設定する

|                項目                |         内容         |
|------------------------------------|----------------------|
| 実行する関数を選択                 | `main`               |
| 実行するデプロイを選択             | `Head`               |
| イベントのソースを選択             | `時間主導型`         |
| 時間ベースのトリガーのタイプを選択 | `分ベースのタイマー` |
| 時間の間隔を選択（分）             | `1分おき`または`5分おき`に設定。間隔を短くなるほどタイムラグが減るが、その分Google Apps Scriptのリソースを消費するので注意 |

6. 一度`main`関数を実行する。権限を求めるウィンドウが表示されるので、許可する


## 開発
npmのworkspace機能を使用しています。パッケージを追加する場合などは、それを念頭にお願いします。
